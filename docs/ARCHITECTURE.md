# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

## –û–±—â–∞—è —Å—Ö–µ–º–∞
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Telegram Bot ‚îÇ ‚Üê‚Üí ‚îÇ Game Engine ‚îÇ ‚Üê‚Üí ‚îÇ Database ‚îÇ
‚îÇ (Gateway) ‚îÇ ‚îÇ (Microservice) ‚îÇ ‚îÇ (Redis/PostgreSQL)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Telegram‚îÇ ‚îÇ Game ‚îÇ ‚îÇ Data ‚îÇ
‚îÇ Users ‚îÇ ‚îÇ Logic ‚îÇ ‚îÇ Storage ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend Services
- **Python 3.9+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **FastAPI** - Game Engine API
- **python-telegram-bot** - Telegram –±–æ—Ç
- **Redis** - –∫–µ—à –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **PostgreSQL** - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Docker Compose** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è

### –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- **REST API** - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **WebSocket** - real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **JSON** - —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

### 1. Telegram Bot Service (`/services/bot`)
```python
# –û—Å–Ω–æ–≤–Ω—ã–µ responsibilities:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–∫–Ω–æ–ø–∫–∏, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å Game Engine API
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏

### 2. Game Engine Service (/services/engine)
python
# –û—Å–Ω–æ–≤–Ω—ã–µ responsibilities:
- –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∏ –º–µ—Ö–∞–Ω–∏–∫–∏
- –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã–º–∏ —Å–µ—Å—Å–∏—è–º–∏
- –ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ —Ä–∞—Å—á–µ—Ç—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–≥—Ä–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
### 3. Data Layer
Redis: –°–µ—Å—Å–∏–∏, –∫–µ—à, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

PostgreSQL: –ò–≥—Ä–æ–∫–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
Redis —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
python
# –°–µ—Å—Å–∏–∏ –∏–≥—Ä–æ–∫–æ–≤
player:{user_id} -> JSON(Player)
party:{party_id} -> JSON(Party)  
game_session:{session_id} -> JSON(GameSession)

# –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
combat:{session_id} -> JSON(CombatState)
location:{node_id} -> JSON(Location)
PostgreSQL —Ç–∞–±–ª–∏—Ü—ã
sql
-- –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–≤
players (user_id, username, total_games, wins, created_at)
player_progress (user_id, level, experience, achievements)
game_sessions (session_id, party_id, result, duration, finished_at)
### –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥
text
User ‚Üí Telegram ‚Üí Bot Service ‚Üí Game Engine ‚Üí Response ‚Üí User
2. Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
text
Game Event ‚Üí WebSocket ‚Üí Bot Service ‚Üí Telegram ‚Üí User
3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
text
Game Action ‚Üí State Change ‚Üí Redis (–∫–µ—à) ‚Üí PostgreSQL (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ
–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis –∫–ª–∞—Å—Ç–µ—Ä–∞

–†–µ–ø–ª–∏–∫–∞—Ü–∏—è PostgreSQL

–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ
–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ Game Engine

–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –±–æ—Ç–∞–º–∏

–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∏–≥—Ä–æ–≤—ã–º —Å–µ—Å—Å–∏—è–º